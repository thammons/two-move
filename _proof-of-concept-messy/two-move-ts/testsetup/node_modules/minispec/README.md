# MiniSpec

MiniSpec is a lightweight test/spec execution engine for TypeScript and JavaScript,
inspired by [RSpec](https://rspec.info/) and [minitest](https://github.com/seattlerb/minitest).

It works out-of-the-box with CommonJS, ESM and TypeScript.

Its purpose is to remain lightweight, without any runtime dependency and really
low number of development dependencies.

## Why another test/spec execution engine?

The idea of MiniSpec cames from the need to write some unit-tests for a
tiny library written in TypeScript. All testing framework were pretty big - with
a lot of dependencies - and may not work well out-of-the-box with TypeScript.

MiniSpec goal is to remain lightweight, without runtime dependency. Its main
purpose is to add a bunch of tests to small JavaScript or TypeScript projects.

Its name comes from the combination of [minitest](https://github.com/seattlerb/minitest),
and [RSpec](https://rspec.info/). Minitest for the idea of having a small and easy
to maintain test/spec engine. RSpec for the spec syntax and for some output formats.

## Why does weight matter?

Less dependencies and a lightweight library means less resources consumed while
downloading it and executing it. It also reduces the potential attack surface.

That means also fewer features. That is why MiniSpec purpose is to be used with
small projects, which do not need advanced testing capabilities that may offer more
popular alternatives.

## Example

Add MiniSpec to your dev dependencies:

```console
$ npm install --save-dev minispec
```

Consider the following TypeScript file:

```typescript
// spec/minispec_entrypoint.ts

import assert from 'assert/strict'
import MiniSpec, { describe, it, beforeEach } from 'minispec'

describe('MiniSpec test engine', async () => {
  let worksWell: boolean

  beforeEach(async () => {
    worksWell = true
  })

  it('works well', async () => {
    assert.ok(worksWell)
  })
})

MiniSpec.execute()
```

Or the following JavaScript file:

```javascript
// spec/minispec_entrypoint.js

// ESM
import assert from 'assert/strict'
import MiniSpec, { describe, it, beforeEach } from 'minispec'

// CommonJs
const assert = require('assert').strict
const MiniSpec = require('minispec').default
const { describe, it, beforeEach } = require('minispec')

// Then, whatever you are using ESM or CommonJs
describe('MiniSpec test engine', async () => {
  let worksWell

  beforeEach(async () => {
    worksWell = true
  })

  it('works well', async () => {
    assert.ok(worksWell)
  })
})

MiniSpec.execute()
```

When you execute the TypeScript file:

```console
$ npx ts-node spec/minispec_entrypoint.ts
```

or the JavaScript file:

```console
$ node spec/minispec_entrypoint.js
```

It will output the following:

```console
MiniSpec test engine
  works well

Finished in 1 milliseconds (discovering took 0 milliseconds, execution took 1 milliseconds)
1 test, no failure üëè
```

Note: depending your TypeScript and [ts-node](https://www.npmjs.com/package/ts-node)
configuration, you may need to use the specific ts-node [esm loader](https://github.com/TypeStrong/ts-node/issues/1007)
if your package is a module.

## Documentation and examples

The documentation is available in the [wiki of the project](https://gitlab.com/kao98/minispec/-/wikis/home).

Some examples are available in the [repository](https://gitlab.com/kao98/minispec/-/tree/main/examples).
